<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Manage Courses</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="X-UA-Conpatible" content="IE=edge" />
        <h:outputStylesheet library="css" name="bootstrap.css"></h:outputStylesheet>
        <h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
        <h:outputStylesheet library="css" name="studentManageCourses.css"></h:outputStylesheet>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    </h:head>
    <h:body style="background-color: #E9EBEE;">
        <div class="row" style="background-color: #125298;">
            <div class="col-md-4">
            </div>
            <div class="col-md-4">
                <h1 align="center" style="color: white;">Manage Courses</h1>
            </div>
        </div>
        <h:form>
            <br/>
            <div class="row">
                <div class="col-md-1">
                </div>
                <div class="col-md-1">
                    <p:button outcome="index.xhtml"
                              value="Back"
                              icon="ui-icon-carat-1-w"
                              style="background-color: white; font-size: medium; width: 100%;"/>
                </div>
                <div class="col-md-8">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="text-align: center; background-color: white;">
                            <h4>Active Courses</h4>
                        </div>
                        <p:dataTable styleClass="borderless" 
                                     value="#{studentSubscribeController.coursesByUser}" 
                                     var="course"
                                     rows="10"
                                     paginator="true"
                                     paginatorTemplate="{CurrentPageReport} 
                                     {FirstPageLink} 
                                     {PreviousPageLink} 
                                     {PageLinks} 
                                     {NextPageLink} 
                                     {LastPageLink} 
                                     {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15"
                                     paginatorPosition="bottom"
                                     emptyMessage="No active Course found.">
                            <p:column filterBy="#{course.name}" headerText="Name" filterMatchMode="contains">
                                <h:outputText value="#{course.name}"/>
                            </p:column>
                            <p:column filterBy="#{course.time}" headerText="Time" filterFunction="#{studentSubscribeController.filterByPrice}">
                                <h:outputText value="#{course.time}">
                                    <f:convertDateTime pattern="yyyy-MM-dd" timeZone="ECT"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>
            </div>
            <br/>
            <div class="row">
                <div class="col-md-2">
                </div>
                <div class="col-md-8">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="text-align: center; background-color: white;">
                            <h4>Subscribed Course</h4>
                        </div>
                        <p:dataTable styleClass="borderless" 
                                     value="#{studentSubscribeController.studentSubscibedCourse}" 
                                     var="course"
                                     rows="1"
                                     emptyMessage="No subscribed Course found.">
                            <p:column headerText="Name">
                                <h:outputText value="#{course.name}"/>
                            </p:column>
                            <p:column headerText="Time">
                                <h:outputText value="#{course.time}">
                                    <f:convertDateTime pattern="yyyy-MM-dd" timeZone="ECT"/>
                                </h:outputText>
                            </p:column>
                            <p:column>
                                <p:commandButton value="Unsubscribe" 
                                                 action="#{studentSubscribeController.unsubscribeFromCourse(course)}" 
                                                 update="@form"
                                                 style="background-color: white"/>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>
            </div>
            <br/>
            <div class="row">
                <div class="col-md-1">
                </div>
                <div class="col-md-1">
                    <p:button outcome="index.xhtml"
                              value="Back"
                              icon="ui-icon-carat-1-w"
                              style="background-color: white; font-size: medium; width: 100%;"/>
                </div>
                <div class="col-md-8">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="text-align: center; background-color: white;">
                            <h4>Available Courses</h4>
                        </div>
                        <p:dataTable styleClass="borderless table-hover" 
                                     value="#{studentSubscribeController.allCourses}" 
                                     var="course"
                                     widgetVar="availableCourseTable"
                                     emptyMessage="No course found with given criteria"
                                     rows="10"
                                     paginator="true"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15"
                                     paginatorPosition="bottom"
                                     filteredValue="#{studentSubscribeController.filteredCourseList}">
                            <p:growl id="growl" life="2000" />
                            <p:column filterBy="#{course.name}" headerText="Name" filterMatchMode="contains">
                                <h:outputText value="#{course.name}"/>
                            </p:column>
                            <p:column filterBy="#{course.time}" headerText="Time" filterFunction="#{studentSubscribeController.filterByPrice}">
                                <h:outputText value="#{course.time}">
                                    <f:convertDateTime pattern="yyyy-MM-dd" timeZone="ECT"/>
                                </h:outputText>
                            </p:column>
                            <p:column>
                                <p:commandButton value="Subscribe" 
                                                 action="#{studentSubscribeController.subscribeToCourse(course)}"
                                                 update="@form"
                                                 style="background-color: white"/>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>
            </div>
            <br/>
        </h:form>
    </h:body>
</html>
